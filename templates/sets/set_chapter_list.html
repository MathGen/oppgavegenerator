{% extends 'base.html' %}
{% load staticfiles %}
{% load bootstrap3 %}

{% block panels %}
    <div class="panel panel-default">
        <div class="panel-body">

            <div class="col-md-8">
                <h1 id="current_object_title"><span id=current_content_title>{{ set.name }}</span>
                    <small>Kapitler</small>
                </h1>
                <hr style="margin-bottom: 5px">
                <div style="margin-bottom: 10px">
                <button class="btn btn-default btn-xs btn-edit-title">
                    Endre tittel
                </button>
                <button class="btn btn-default btn-xs btn-edit-order">
                    Endre rekkefølge
                </button><span id="order_success" class="glyphicon glyphicon-ok text-success" style="display:none"></span>
                </div>
                <hr style="display:none">
                <div id="object_container" class="sortable edit_chapters">
                    {% for chapter in object_list %}
                        <div class="panel panel-default" data-object_id="{{ chapter.id }}">
                            <div class="panel-body">

                                <strong class="text-left">{{ chapter.name|title }}</strong>

                                <div class="btn-group btn-group-sm pull-right" role="group">
                                    <a href="{% url 'levels_by_chapter' chapter.id %}" class="btn btn-default">
                                        <span class="glyphicon glyphicon-pencil"></span>
                                    </a>
                                    <button class="btn btn-danger btn-delete-object" data-object-title="{{ chapter.name }}"
                        data-object-type="chapter" data-object-id="{{ chapter.id }}">
                                        <span class="glyphicon glyphicon-trash"></span>
                                    </button>
                                </div>
                            </div>
                        </div>

                    {% empty %}
                        <div class="alert alert-info text-center">
                            Ingen kapitler i settet enda.
                        </div>
                    {% endfor %}
                </div>

                <input id="input_new_set" type="text" class="list_input form-control new_content input-chapter-name"
                       placeholder="Opprett nytt kapittel...">
                <hr>
                <a href="{% url 'user_sets' %}" class="btn btn-primary">
                    <span class="glyphicon glyphicon-arrow-left"></span>
                    Mine Oppgavesett
                </a>
                <button class="btn btn-primary" data-type="set" data-object-id="{{ set.id }}">
                    Lagre
                </button>

            </div>

            <div class="col-md-4">
                <h1>Kopiering</h1>
                <hr>
                <div class="form-group">
                    <div class="input-group">
                        <input id="search_input" type="search" class="form-control input-sm"
                               placeholder="Søk i kapitler...">
            <span class="input-group-btn">
                <button id="search_submit" class="btn btn-primary btn-sm"><span
                        class="glyphicon glyphicon-search"></span>
                </button>
            </span>
                    </div>
                </div>
                <div id="search_chapters" class="panel panel-default search_container hidden"></div>
            </div>


        </div>

    </div>

{% endblock %}

{% block modals %}

    <div id="deleteModal" class="modal fade bs-example-modal-sm confirm-delete-modal" tabindex="-1" role="dialog"
         aria-labelledby="mySmallModalLabel">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-body">
                    <div class="modal-alert alert alert-danger"></div>
                    <a id="cancelModal" class="btn btn-sm btn-primary hidemodal">Avbryt</a>
                    <button id="confirmDelete" class="btn btn-sm btn-danger" data-object-type="" data-object-id="">
                        Slett
                    </button>
                </div>
            </div>
        </div>
    </div>


    <div id="titleModal" class="modal fade bs-example-modal-sm change-title-modal" tabindex="-1" role="dialog"
         aria-labelledby="mySmallModalLabel">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body">
                    <div class="modal-alert alert alert-info text-center">Skriv inn ny tittel.</div>
                    <input id="new_title_input" type="text" class="form-control new-title" placeholder="Ny tittel">
                    <hr>
                    <a id="cancelModal" class="btn btn-sm btn-primary hidemodal">Avbryt</a>
                    <button id="confirmTitle" class="btn btn-sm btn-primary" data-object-type="0" data-object-id="0">
                        Lagre
                    </button>
                </div>
            </div>
        </div>
    </div>

{% endblock %}


{% block js %}
    <script>
        var current_set = {{ user.extendeduser.current_set.id }};
    </script>
    <script src="{% static "js/set_edit_functions.js" %}"></script>
{% endblock %}